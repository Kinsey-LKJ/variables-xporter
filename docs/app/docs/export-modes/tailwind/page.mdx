import { Cards } from 'nextra/components'
import { Callout } from 'nextra/components'
import { Palette, Type, Layers } from 'lucide-react'
import { CodePreview } from '../../components/CodePreview'

# Tailwind CSS 导出

选择 Tailwind CSS 导出方式时，Variables Xporter 会生成两个文件：
- `tailwind.config.js` - Tailwind CSS 的配置文件
- `global.css` - 包含所有 CSS 变量定义

## 特性和优化

### 1. 颜色值优化
自动将颜色值转换为 RGB 通道格式，支持 Tailwind 的不透明度修饰符：

<CodePreview
  before={`// Figma 变量
colors/
  primary/
    default: #C03939
    foreground: #FFFFFF`}
  after={`// tailwind.config.js
colors: {
  primary: 'rgb(var(--colors-primary-default))'
}

// global.css
:root {
  --colors-primary-default: 192 57 57;  /* RGB 通道格式 */
}`}
  language="js"
/>

使用示例：
```html
<div class="text-primary/80">  <!-- 80% 不透明度 -->
  Hello World
</div>
```

### 2. 字体变量合并
自动合并相关的字体变量，符合 Tailwind 的约定：

<CodePreview
  before={`// Figma 变量
typography/
  heading-1/
    size: 40px
    line-height: 1.2
    weight: 600`}
  after={`fontSize: {
  'heading-1': ['2.5rem', {
    lineHeight: '1.2',
    fontWeight: '600'
  }]
}`}
  language="js"
/>

### 3. 主题模式支持
自动处理主题切换相关的变量：

```css
/* global.css */
:root {
  --colors-primary: var(--colors-primary-light);
}

.dark {
  --colors-primary: var(--colors-primary-dark);
}
```

## 实际使用场景

### 1. 响应式设计
```js
// tailwind.config.js
module.exports = {
  theme: {
    extend: {
      spacing: {
        'container': 'var(--spacing-container)'
      }
    }
  }
}

// global.css
:root {
  --spacing-container: 1rem;
}

@media (min-width: 768px) {
  :root {
    --spacing-container: 2rem;
  }
}
```

使用示例：
```html
<div class="p-container">
  响应式内容
</div>
```

### 2. 组件变体
```js
// tailwind.config.js
module.exports = {
  theme: {
    extend: {
      backgroundColor: {
        'button': 'var(--button-bg)',
        'button-secondary': 'var(--button-secondary-bg)'
      },
      textColor: {
        'button': 'var(--button-text)',
        'button-secondary': 'var(--button-secondary-text)'
      }
    }
  }
}
```

使用示例：
```html
<button class="bg-button text-button">
  主要按钮
</button>
<button class="bg-button-secondary text-button-secondary">
  次要按钮
</button>
```

### 3. 渐变和动画
```js
// tailwind.config.js
module.exports = {
  theme: {
    extend: {
      backgroundImage: {
        'gradient-custom': 'var(--gradient-custom)'
      },
      keyframes: {
        'custom-bounce': {
          '0%, 100%': { transform: 'var(--bounce-transform-up)' },
          '50%': { transform: 'var(--bounce-transform-down)' }
        }
      }
    }
  }
}
```

## 最佳实践

### 1. 变量命名
- 使用语义化的名称
- 遵循 Tailwind 的命名约定
- 保持命名简洁明了

### 2. 配置组织
- 按功能分组配置
- 使用 extend 而不是覆盖
- 合理使用默认值

### 3. 性能优化
- 避免过度使用自定义属性
- 利用 Tailwind 的 JIT 编译
- 合理设置 safelist

## 常见问题与解决方案

### 1. 自定义值不生效
可能的原因：
- 配置文件位置错误
- 变量名称不匹配
- 构建缓存问题

解决方案：
1. 检查配置文件路径
2. 验证变量名称拼写
3. 清除构建缓存

### 2. 主题切换异常
可能的原因：
- CSS 变量未正确定义
- 类名应用顺序问题
- 暗色模式配置错误

解决方案：
1. 检查 CSS 变量定义
2. 调整类名优先级
3. 验证暗色模式配置

## 必须遵守的规则

### 1. 顶层结构
变量集合必须使用 Tailwind CSS 的主题配置名：

- `colors` - 颜色变量
- `spacing` - 间距、宽度、高度等
- `fontSize` - 字体大小
- `fontWeight` - 字重
- `borderRadius` - 圆角
- `opacity` - 透明度
等。

### 2. 变量层级
使用 `DEFAULT` 作为基础值的标记：

```
colors/
  primary/
    DEFAULT     -> text-primary
    foreground  -> text-primary-foreground
```

## 变量组织建议

虽然只有上述规则是必须遵守的，但我们仍建议你遵循以下组织原则：

<Cards>
  <Cards.Card
    icon={<Layers />}
    title="基本原则"
    href="/docs/organizing-your-variables/principles"
  />
  <Cards.Card
    icon={<Palette />}
    title="颜色系统"
    href="/docs/organizing-your-variables/colors"
  />
  <Cards.Card
    icon={<Type />}
    title="排版系统"
    href="/docs/organizing-your-variables/typography"
  />
</Cards>

<Callout type="info" emoji="💡">
  合理利用 Tailwind CSS 的特性和 Variables Xporter 的功能，可以构建出灵活、可维护且性能优秀的设计系统。
</Callout>   